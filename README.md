# 微信育儿小程序 wechat-betababy

一个基于微信的育儿小程序，开箱即用。

# 写在前面
关于小程序的开发、部署、发布等相关问题请移步官方文档。`咨询问题的最好是产品本身`。

# 核心功能
- 宝宝模块 - 每个用户可以维护最多`5`个宝宝（超出的话，那要反思一下啦，哈哈）
- 记录模块 - 用户可以记录每个宝宝的日常生活，如：吃、喝、拉、玩、学等
- 关联宝宝 - 用户可以把宝宝分享给其它人并关联，关联后可以共同维护信息

其中还包括登录、关于页面等。

# 部署说明
在部署前，你应该先了解小程序的申请、开发、发布流程，以及小程序的云开发功能。本文档不做介绍。

#### 1.修改项目名称及 appid 配置

下载代码后，开发者优先修改小程序的配置信息。你可以打开根目录下的 `project.config.json` 文件，修改 `appid` 和 `项目名称`。

```json
{
    "appid": "your appid",
    "projectname": "your projectname"
}
```

#### 2.使用小程序开发工具创建数据库

目前小程序用到 `4` 个数据库集合，开发者需要自行创建`babies`、`posts`、`logs`、`relationship`。

- babies - 用于存放宝宝数据
- posts - 用于存放记录数据
- logs - 日志流水表
- relationship - 宝宝关联表

#### 3.修改数据库权限

将所有数据库权限调整为`所有用户可读，仅创建者可读写`

#### 4.创建 release 和 test 环境

创建的时候要注意`环境名称`和 `环境ID`的区别，代码里用到的是`环境ID`，**创建后不可修改**。

> release 和 test 是环境ID，不是环境名称

#### 5.上传并部署云函数

小程序云函数需要一个一个上传并部署，开发者可以逐个上传。

> 在云函数上右键选择『上传并部署』，不要上传本地 `node_modules` 文件

#### 6.修改云函数时区

小程序云函数时区默认是 UTC+0，而北京时间是UTC+8，需要针对每个云函数单独设置时区。

```javascript
// 修改路径：云开发/云函数/版本管理/配置
TZ = Asia/Shanghai
```

> 小程序开发工具无法批量修改，只能逐个修改（很麻烦对吧）。

#### 7.发布你的小程序

你以为就能发布了吗？并不能。因为微信审核太严格了，个人类型的小程序审核基本失败。

# 附录
https://github.com/eyson/wechat-betababy

![尤点意思-公众号-二维码](http://www.eyson.cn/usr/uploads/2019/06/1999457739.jpg)
![微信收款-二维码](http://www.eyson.cn/usr/uploads/2020/07/3774860315.jpeg)